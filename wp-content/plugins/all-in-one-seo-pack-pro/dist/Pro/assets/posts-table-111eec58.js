import{_ as f,r as m,o as a,c as p,f as i,d,a as h,g as c,t as u,q as w,u as T,x as O,n as x,h as C,w as j,e as P,b as E,j as y}from"./js/_plugin-vue_export-helper.49ea0e68.js";import{l as M}from"./js/index.9ef60339.js";import{l as z}from"./js/index.d59f905b.js";import{l as R}from"./js/index.0b123ab1.js";import{a as F,t as G,T as H}from"./js/postContent.53eb7ed3.js";import{e as b}from"./js/elemLoaded.9a6eb745.js";import{f as D,g as A,m as k,s as I}from"./js/index.3cfc26e3.js";import{a as S}from"./js/vuex.esm-bundler.ccdd8fb3.js";import"./js/WpTable.5b32ebd5.js";import"./js/default-i18n.3a91e0e5.js";import"./js/constants.355a3bff.js";import{a as N,b as q}from"./js/Caret.09e548f3.js";import{t as L}from"./js/html.68197829.js";import"./js/SaveChanges.04870e44.js";import{T as U}from"./js/TruSeoScore.76897846.js";import{C as J}from"./js/ScoreButton.2fe9b7f2.js";import{S as K,a as Q,b as W,c as X}from"./js/Affiliate.bd403a25.js";import"./js/client.7afeb6b0.js";import"./js/_commonjsHelpers.f84db168.js";import"./js/helpers.871dba46.js";import"./js/cleanForSlug.13f04843.js";import"./js/isArrayLikeObject.8c985d83.js";import"./js/RequiresUpdate.fe231e49.js";import"./js/Index.20fccad8.js";const Y={components:{CoreScoreButton:J,SvgCircleCheck:N,SvgCircleClose:q},mixins:[U],props:{post:Object,index:Number},data(){return{postId:null,columnName:null,value:null,title:null,titleParsed:null,postDescription:null,descriptionParsed:null,imageTitle:null,imageAltTag:null,showEditTitle:!1,showEditDescription:!1,showEditImageTitle:!1,showEditImageAltTag:!1,showTruSeo:!1,isSpecialPage:!1,strings:{title:this.$t.__("Title:",this.$td),description:this.$t.__("Description:",this.$td),imageTitle:this.$t.__("Image Title:",this.$td),imageAltTag:this.$t.__("Image Alt Tag:",this.$td),edit:this.$t.__("Edit",this.$td),save:this.$t.__("Save",this.$td),cancel:this.$t.__("Cancel",this.$td),wait:this.$t.__("Please wait...",this.$td)}}},computed:{...S(["options","currentPost"])},methods:{save(){this.showEditTitle=!1,this.showEditDescription=!1,this.post.title=this.title,this.post.description=this.postDescription,this.$http.post(this.$links.restUrl("postscreen")).send({postId:this.post.id,title:this.post.title,description:this.post.description}).then(s=>{this.titleParsed=s.body.title,this.descriptionParsed=s.body.description,this.post.titleParsed=s.body.title,this.post.descriptionParsed=s.body.description;const e=window.aioseo.posts;e[this.index]=this.post,D(this.$.appContext.app,{posts:e}),this.$root._data.screen.base!=="upload"&&this.runAnalysis(this.post.id)}).catch(s=>{console.error(`Unable to update post with ID ${this.post.id}: ${s}`)})},saveImage(){this.showEditImageTitle=!1,this.showEditImageAltTag=!1,this.post.title=this.title,this.post.description=this.postDescription,this.post.imageTitle=this.imageTitle,this.post.imageAltTag=this.imageAltTag,this.$http.post(this.$links.restUrl("postscreen")).send({postId:this.post.id,isMedia:!0,title:this.post.title,description:this.post.description,imageTitle:this.post.imageTitle,imageAltTag:this.post.imageAltTag}).then(()=>{}).catch(s=>{console.error(`Unable to update attachment with ID ${this.post.id}: ${s}`)})},cancel(){this.value=this.post.value,this.showEditTitle=!1,this.showEditDescription=!1,this.showEditImageTitle=!1,this.showEditImageAltTag=!1},editTitle(){this.showEditTitle=!0},editDescription(){this.showEditDescription=!0},editImageTitle(){this.showEditImageTitle=!0},editImageAlt(){this.showEditImageAltTag=!0},truncate:L,updatePostTitle(s,e){const n=document.getElementById(`post-${s}`);if(!n)return;const v=n.getElementsByClassName("title")[0].getElementsByTagName("a")[0];if(!v)return;const t=v.getElementsByTagName("span")[0];v.innerText=e,v.prepend(t)}},mounted(){this.postId=this.post.id,this.columnName=this.post.columnName,this.value=this.post.value,this.imageTitle=this.post.imageTitle,this.imageAltTag=this.post.imageAltTag,this.isSpecialPage=this.post.isSpecialPage,this.title=this.post.title||this.post.defaultTitle,this.titleParsed=this.post.titleParsed,this.postDescription=this.post.description||this.post.defaultDescription,this.descriptionParsed=this.post.descriptionParsed},async created(){const{options:s,currentPost:e,tags:n}=await A(this.$.appContext.app);this.$store.state.options=k({...this.$store.state.options},{...s}),this.$store.state.currentPost=k({...this.$store.state.currentPost},{...e}),this.$store.state.tags=k({...this.$store.state.tags},{...n}),this.showTruSeo=F()}},Z={key:0,class:"edit-row"},tt={key:1,class:"edit-row edit-title"},et=["title"],st=["id"],it={key:2,class:"edit-row"},ot=["title"],nt=["title"],lt={key:3,class:"edit-row edit-description"},rt=["title"],at=["id"],ct={key:4,class:"edit-row"},dt=["title"],ut=["title"],pt={key:5,class:"edit-row edit-image-title"},ht=["title"],mt=["id"],_t={key:6,class:"edit-row"},gt=["title"],vt=["title"],wt={key:7,class:"edit-row edit-image-alt"},Tt=["title"],kt=["id"],ft={key:8,class:"edit-row"},Pt=["title"],Ct=["title"];function It(s,e,n,v,t,o){const g=m("core-score-button"),_=m("svg-circle-check"),r=m("svg-circle-close");return a(),p("div",{class:x(["aioseo-details-column",{editing:t.showEditTitle||t.showEditDescription||t.showEditImageTitle||t.showEditImageAltTag}])},[i("div",null,[this.$root._data.screen.base==="edit"&&t.showTruSeo&&this.$allowed("aioseo_page_analysis")&&!t.isSpecialPage?(a(),p("div",Z,[d(g,{score:this.post.value,postId:t.postId},null,8,["score","postId"])])):h("",!0),this.$allowed("aioseo_page_general_settings")?(a(),p("div",tt,[i("a",{class:"dashicons dashicons-edit aioseo-quickedit",title:t.strings.edit,onClick:e[0]||(e[0]=c((...l)=>o.editTitle&&o.editTitle(...l),["prevent"]))},null,8,et),i("strong",null,u(t.strings.title)+" ",1),i("span",{id:`aioseo-${t.columnName}-${t.postId}-value`},u(o.truncate(t.titleParsed,100)),9,st)])):h("",!0),t.showEditTitle?(a(),p("div",it,[w(i("textarea",{"onUpdate:modelValue":e[1]||(e[1]=l=>t.title=l),class:"aioseo-quickedit-input",rows:"4",columns:"32"},null,512),[[T,t.title]]),i("a",{class:"dashicons aioseo-quickedit-input-save",onClick:e[2]||(e[2]=c((...l)=>o.save&&o.save(...l),["prevent"])),title:t.strings.save},[d(_,{width:"20"})],8,ot),i("a",{class:"dashicons aioseo-quickedit-input-cancel",onClick:e[3]||(e[3]=c((...l)=>o.cancel&&o.cancel(...l),["prevent"])),title:t.strings.cancel},[d(r,{width:"20"})],8,nt)])):h("",!0),this.$allowed("aioseo_page_general_settings")?(a(),p("div",lt,[i("a",{class:"dashicons dashicons-edit aioseo-quickedit",title:t.strings.edit,onClick:e[4]||(e[4]=c((...l)=>o.editDescription&&o.editDescription(...l),["prevent"]))},null,8,rt),i("strong",null,u(t.strings.description)+" ",1),i("span",{id:`aioseo-${t.columnName}-${t.postId}-value`},u(o.truncate(t.descriptionParsed)),9,at)])):h("",!0),t.showEditDescription?(a(),p("div",ct,[w(i("textarea",{"onUpdate:modelValue":e[5]||(e[5]=l=>t.postDescription=l),class:"aioseo-quickedit-input",rows:"4",columns:"32"},null,512),[[T,t.postDescription]]),i("a",{class:"dashicons aioseo-quickedit-input-save",onClick:e[6]||(e[6]=c((...l)=>o.save&&o.save(...l),["prevent"])),title:t.strings.save},[d(_,{width:"20"})],8,dt),i("a",{class:"dashicons aioseo-quickedit-input-cancel",onClick:e[7]||(e[7]=c((...l)=>o.cancel&&o.cancel(...l),["prevent"])),title:t.strings.cancel},[d(r,{width:"20"})],8,ut)])):h("",!0),O(s.$slots,"default"),this.$root._data.screen.base==="upload"&&n.post.showMedia?(a(),p("div",pt,[i("a",{class:"dashicons dashicons-edit aioseo-quickedit",title:t.strings.edit,onClick:e[8]||(e[8]=c((...l)=>o.editImageTitle&&o.editImageTitle(...l),["prevent"]))},null,8,ht),i("strong",null,u(t.strings.imageTitle),1),i("span",{id:`aioseo-${t.columnName}-${t.postId}-value`},u(t.imageTitle),9,mt)])):h("",!0),t.showEditImageTitle?(a(),p("div",_t,[w(i("textarea",{"onUpdate:modelValue":e[9]||(e[9]=l=>t.imageTitle=l),class:"aioseo-quickedit-input",rows:"4",columns:"32"},null,512),[[T,t.imageTitle]]),i("a",{class:"dashicons aioseo-quickedit-input-save",onClick:e[10]||(e[10]=c((...l)=>o.saveImage&&o.saveImage(...l),["prevent"])),title:t.strings.save},[d(_,{width:"20"})],8,gt),i("a",{class:"dashicons aioseo-quickedit-input-cancel",onClick:e[11]||(e[11]=c((...l)=>o.cancel&&o.cancel(...l),["prevent"])),title:t.strings.cancel},[d(r,{width:"20"})],8,vt)])):h("",!0),this.$root._data.screen.base==="upload"&&n.post.showMedia?(a(),p("div",wt,[i("a",{class:"dashicons dashicons-edit aioseo-quickedit",title:t.strings.edit,onClick:e[12]||(e[12]=c((...l)=>o.editImageAlt&&o.editImageAlt(...l),["prevent"]))},null,8,Tt),i("strong",null,u(t.strings.imageAltTag),1),i("span",{id:`aioseo-${t.columnName}-${t.postId}-value`},u(t.imageAltTag),9,kt)])):h("",!0),t.showEditImageAltTag?(a(),p("div",ft,[w(i("textarea",{"onUpdate:modelValue":e[13]||(e[13]=l=>t.imageAltTag=l),class:"aioseo-quickedit-input",rows:"4",columns:"32"},null,512),[[T,t.imageAltTag]]),i("a",{class:"dashicons aioseo-quickedit-input-save",onClick:e[14]||(e[14]=c((...l)=>o.saveImage&&o.saveImage(...l),["prevent"])),title:t.strings.save},[d(_,{width:"20"})],8,Pt),i("a",{class:"dashicons aioseo-quickedit-input-cancel",onClick:e[15]||(e[15]=c((...l)=>o.cancel&&o.cancel(...l),["prevent"])),title:t.strings.cancel},[d(r,{width:"20"})],8,Ct)])):h("",!0)])],2)}const V=f(Y,[["render",It]]);const xt={components:{CorePostColumn:V,SvgLinkAffiliate:K,SvgLinkExternal:Q,SvgLinkInternalInbound:W,SvgLinkInternalOutbound:X},props:{post:Object,index:Number},data(){return{strings:{links:this.$t.__("Links:",this.$tdPro)}}}},Et={key:0,class:"links"},yt={class:"header"};function bt(s,e,n,v,t,o){const g=m("svg-link-internal-inbound"),_=m("svg-link-internal-outbound"),r=m("svg-link-affiliate"),l=m("svg-link-external"),B=m("core-post-column");return a(),C(B,{post:n.post,index:n.index},{default:j(()=>[i("template",null,[n.post.linkCounts&&n.post.postType!=="attachment"?(a(),p("div",Et,[i("strong",yt,u(t.strings.links),1),i("span",null,[d(g),P(u(n.post.linkCounts.inboundInternal),1)]),i("span",null,[d(_),P(u(n.post.linkCounts.outboundInternal),1)]),i("span",null,[d(r),P(u(n.post.linkCounts.affiliate),1)]),i("span",null,[d(l),P(u(n.post.linkCounts.external),1)])])):h("",!0)])]),_:1},8,["post","index"])}const Dt=f(xt,[["render",bt]]),At={components:{CorePostColumn:V},props:{post:Object,index:Number}};function St(s,e,n,v,t,o){const g=m("core-post-column");return a(),C(g,{post:n.post,index:n.index},null,8,["post","index"])}const Nt=f(At,[["render",St]]),qt={components:{PostColumn:Dt,PostColumnLite:Nt},props:{post:Object,index:Number}};function Lt(s,e,n,v,t,o){const g=m("PostColumn"),_=m("PostColumnLite");return a(),p("div",null,[s.$isPro?(a(),C(g,{key:0,post:n.post,index:n.index},null,8,["post","index"])):h("",!0),s.$isPro?h("",!0):(a(),C(_,{key:1,post:n.post,index:n.index},null,8,["post","index"]))])}const Ut=f(qt,[["render",Lt]]);const Vt={components:{SvgCircleCheck:N,SvgCircleClose:q},mixins:[U],props:{term:Object,index:Number},data(){return{termId:null,columnName:null,title:null,titleParsed:null,termDescription:null,descriptionParsed:null,showEditTitle:!1,showEditDescription:!1,showTruSeo:!1,strings:{title:this.$t.__("Title:",this.$td),description:this.$t.__("Description:",this.$td),edit:this.$t.__("Edit",this.$td),save:this.$t.__("Save",this.$td),cancel:this.$t.__("Cancel",this.$td),wait:this.$t.__("Please wait...",this.$td)}}},computed:{...S(["options","currentPost"])},methods:{save(){this.showEditTitle=!1,this.showEditDescription=!1,this.term.title=this.title,this.term.description=this.termDescription,this.$http.post(this.$links.restUrl("termscreen")).send({termId:this.term.id,title:this.term.title,description:this.term.description}).then(s=>{this.titleParsed=s.body.title,this.descriptionParsed=s.body.description,this.term.titleParsed=s.body.title,this.term.descriptionParsed=s.body.description;const e=window.aioseo.terms;e[this.index]=this.term,D(this.$.appContext.app,{terms:e})}).catch(s=>{console.error(`Unable to update term with ID ${this.term.id}: ${s}`)})},cancel(){this.showEditTitle=!1,this.showEditDescription=!1},editTitle(){this.showEditTitle=!0},editDescription(){this.showEditDescription=!0},truncate:L},mounted(){this.termId=this.term.id,this.columnName=this.term.columnName,this.title=this.term.title,this.titleParsed=this.term.titleParsed,this.termDescription=this.term.description,this.descriptionParsed=this.term.descriptionParsed},async created(){const{options:s,currentPost:e,tags:n}=await A(this.$.appContext.app);this.$store.state.options=k({...this.$store.state.options},{...s}),this.$store.state.currentPost=k({...this.$store.state.currentPost},{...e}),this.$store.state.tags=k({...this.$store.state.tags},{...n}),this.showTruSeo=G()}},$t={class:"edit-row edit-title"},Bt=["title"],Ot=["id"],jt={key:0,class:"edit-row"},Mt=["title"],zt=["title"],Rt={class:"edit-row edit-description"},Ft=["title"],Gt=["id"],Ht={key:1,class:"edit-row"},Jt=["title"],Kt=["title"];function Qt(s,e,n,v,t,o){const g=m("svg-circle-check"),_=m("svg-circle-close");return a(),p("div",{class:x(["aioseo-details-column",{editing:t.showEditTitle||t.showEditDescription}])},[i("div",null,[i("div",$t,[i("a",{class:"dashicons dashicons-edit aioseo-quickedit",title:t.strings.edit,onClick:e[0]||(e[0]=c((...r)=>o.editTitle&&o.editTitle(...r),["prevent"]))},null,8,Bt),i("strong",null,u(t.strings.title),1),i("span",{id:`aioseo-${t.columnName}-${t.termId}-value`},u(o.truncate(t.titleParsed,100)),9,Ot)]),t.showEditTitle?(a(),p("div",jt,[w(i("textarea",{"onUpdate:modelValue":e[1]||(e[1]=r=>t.title=r),class:"aioseo-quickedit-input",rows:"4",columns:"32"},null,512),[[T,t.title]]),i("a",{class:"dashicons aioseo-quickedit-input-save",onClick:e[2]||(e[2]=c((...r)=>o.save&&o.save(...r),["prevent"])),title:t.strings.save},[d(g,{width:"20"})],8,Mt),i("a",{class:"dashicons aioseo-quickedit-input-cancel",onClick:e[3]||(e[3]=c((...r)=>o.cancel&&o.cancel(...r),["prevent"])),title:t.strings.cancel},[d(_,{width:"20"})],8,zt)])):h("",!0),i("div",Rt,[i("a",{class:"dashicons dashicons-edit aioseo-quickedit",title:t.strings.edit,onClick:e[4]||(e[4]=c((...r)=>o.editDescription&&o.editDescription(...r),["prevent"]))},null,8,Ft),i("strong",null,u(t.strings.description),1),i("span",{id:`aioseo-${t.columnName}-${t.termId}-value`},u(o.truncate(t.descriptionParsed)),9,Gt)]),t.showEditDescription?(a(),p("div",Ht,[w(i("textarea",{"onUpdate:modelValue":e[5]||(e[5]=r=>t.termDescription=r),class:"aioseo-quickedit-input",rows:"4",columns:"32"},null,512),[[T,t.termDescription]]),i("a",{class:"dashicons aioseo-quickedit-input-save",onClick:e[6]||(e[6]=c((...r)=>o.save&&o.save(...r),["prevent"])),title:t.strings.save},[d(g,{width:"20"})],8,Jt),i("a",{class:"dashicons aioseo-quickedit-input-cancel",onClick:e[7]||(e[7]=c((...r)=>o.cancel&&o.cancel(...r),["prevent"])),title:t.strings.cancel},[d(_,{width:"20"})],8,Kt)])):h("",!0)])],2)}const Wt=f(Vt,[["render",Qt]]),$=s=>(s=M(s),s=z(s),s=R(s),s.use(I),I._vm=s,s.config.globalProperties.$truSeo=new H,s),Xt=(s,e)=>{$(E({data(){return{screen:window.aioseo.screen}},render:()=>y(Ut)},{post:s,index:e})).mount(`#${s.columnName}-${s.id}`)};window.aioseo.posts&&window.aioseo.posts.forEach((s,e)=>{b(`#${s.columnName}-${s.id}`,`aioseoPostsTable-${s.id}`),document.addEventListener("animationstart",function(n){`aioseoPostsTable-${s.id}`===n.animationName&&Xt(s,e)},{passive:!0})});const Yt=(s,e)=>{$(E({data(){return{screen:window.aioseo.screen}},render:()=>y(Wt)},{term:s,index:e})).mount(`#${s.columnName}-${s.id}`)};window.aioseo.terms&&window.aioseo.posts.length===0&&window.aioseo.terms.forEach((s,e)=>{b(`#${s.columnName}-${s.id}`,`aioseoTermsTable-${s.id}`),document.addEventListener("animationstart",function(n){`aioseoTermsTable-${s.id}`===n.animationName&&Yt(s,e)},{passive:!0})});
