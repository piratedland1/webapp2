import{a as x,m as K,d as L}from"./vuex.esm-bundler.ccdd8fb3.js";import{C as z}from"./Blur.ef3abea2.js";import{C as A}from"./Card.a7500a15.js";import{G as F,a as H}from"./Row.87dd14fc.js";import{G as V,S as U}from"./SeoStatisticsOverview.5b27bf34.js";import{_ as T,r,o as d,c as k,d as i,a as P,h as v,w as t,f as m,g as S,t as p,e as y,x as I,n as W}from"./_plugin-vue_export-helper.49ea0e68.js";import{K as M}from"./KeywordsGraph.ef23a122.js";import{d as R}from"./helpers.871dba46.js";import{W as J,L as Q}from"./WpTable.5b32ebd5.js";import"./default-i18n.3a91e0e5.js";import"./constants.355a3bff.js";import"./index.3cfc26e3.js";import"./SaveChanges.04870e44.js";import{P as O}from"./PostTypes.9ab32454.js";import{S as E,T as X}from"./Statistic.d0f8b7e4.js";import{C as Y}from"./Tooltip.754dc940.js";import{C as N}from"./Table.edad123c.js";import{C as j}from"./Index.a6f4141a.js";import{C as Z,e as ee}from"./Caret.09e548f3.js";import{R as te}from"./RequiredPlans.6baa6da5.js";const se={components:{Graph:V},computed:{...x("search-statistics",["data","loading"]),series(){var c,a;if(!((a=(c=this.data)==null?void 0:c.keywords)!=null&&a.distribution))return[];const e=this.data.keywords.distribution;return[{name:this.$t.__("Keywords",this.$td),data:[{x:this.$t.__("Top 3 Position",this.$td),y:e.top3,fillColor:"#005AE0"},{x:this.$t.__("4-10 Position",this.$td),y:e.top10,fillColor:"#00AA63"},{x:this.$t.__("11-50 Position",this.$td),y:e.top50,fillColor:"#F18200"},{x:this.$t.__("50-100 Position",this.$td),y:e.top100,fillColor:"#DF2A4A"}]}]}}},oe={class:"aioseo-search-statistics-keywords-distribution-graph"};function ie(e,c,a,u,s,l){const _=r("graph");return d(),k("div",oe,[i(_,{series:l.series,loading:e.loading.keywords,preset:"keywordsDistribution"},null,8,["series","loading"])])}const G=T(se,[["render",ie]]);const re={components:{CoreLoader:Z,CoreWpTable:N,Statistic:E},mixins:[O],props:{index:{type:Number,required:!0},postDetail:{type:Boolean,required:!1,default:!1}},data(){return{loading:!1}},computed:{...x("search-statistics",["data"]),postColumns(){return[{slug:"post_title",label:this.$t.__("Title",this.$td),width:"100%"},{slug:"clicks",label:this.$t.__("Clicks",this.$td),width:"120px"},{slug:"ctr",label:this.$t.__("Avg. CTR",this.$td),width:"120px"},{slug:"impressions",label:this.$t.__("Impressions",this.$td),width:"120px"},{slug:"position",label:this.$t.__("Position",this.$td),width:"120px"}]},keywords(){return this.postDetail?this.data.postDetail.keywords.paginated.rows:this.data.keywords.paginated.rows},row(){return this.keywords[this.index]}},methods:{...K("search-statistics",["getPagesByKeywords"]),openPostDetail(e){this.$router.push({path:"/post-detail",query:{postId:e.postId,previousRoute:this.$route.name}})}},mounted(){var e,c;!this.row||(c=(e=this.row)==null?void 0:e.pages)!=null&&c.length||(this.loading=!0,this.getPagesByKeywords([this.row.keyword]).then(a=>{this.loading=!1;const u=a[this.row.keyword];u&&(this.postDetail?this.data.postDetail.keywords.paginated.rows[this.index].pages=Object.values(u).slice(0,10):this.data.keywords.paginated.rows[this.index].pages=Object.values(u).slice(0,10))}))}},ne={class:"keyword-inner"},ae={key:0,class:"keyword-inner-loading"},le={class:"post-title"},de=["onClick"],ce={key:1,class:"post-title"},he={key:0,class:"row-actions"},pe=["href"],ue=["href"];function _e(e,c,a,u,s,l){const _=r("core-loader"),g=r("statistic"),f=r("core-wp-table");return d(),k("div",ne,[s.loading?(d(),k("div",ae,[i(_,{dark:""})])):P("",!0),l.row.pages&&!s.loading?(d(),v(f,{ref:"table",class:"posts-table",key:1,columns:l.postColumns,rows:l.row.pages,"show-header":!1,"show-bulk-actions":!1,"show-table-footer":!1},{post_title:t(({row:o})=>[m("div",le,[o.postId?(d(),k("a",{key:0,href:"#",onClick:S(b=>l.openPostDetail(o),["prevent"])},p(o.postTitle),9,de)):(d(),k("span",ce,p(o.postTitle),1))]),o.postId?(d(),k("div",he,[m("span",null,[m("a",{class:"view",href:o.context.permalink,target:"_blank"},[m("span",null,p(e.viewPost(o.context.postType.singular)),1)],8,pe),y(" | ")]),m("span",null,[m("a",{class:"edit",href:o.context.editLink,target:"_blank"},[m("span",null,p(e.editPost(o.context.postType.singular)),1)],8,ue)])])):P("",!0)]),clicks:t(({row:o})=>[y(p(e.$numbers.compactNumber(o.clicks)),1)]),ctr:t(({row:o})=>[y(p(o.ctr)+"% ",1)]),impressions:t(({row:o})=>[y(p(e.$numbers.compactNumber(o.impressions)),1)]),position:t(({row:o})=>[o.difference.comparison?(d(),v(g,{key:0,type:"position",total:o.position,difference:o.difference.position},null,8,["total","difference"])):P("",!0)]),_:1},8,["columns","rows"])):P("",!0)])}const fe=T(re,[["render",_e]]);const ge={components:{CoreTooltip:Y,CoreWpTable:N,Cta:j,KeywordInner:fe,Statistic:E,SvgCaret:ee},mixins:[O,J,X],data(){return{tableId:"aioseo-search-statistics-keywords-table",activeRow:-1,showUpsell:!1,isPreloading:!1,isFetching:!1,interval:null,strings:{ctaButtonText:this.$t.__("Upgrade to Pro and Unlock Access Control",this.$td),ctaHeader:this.$t.sprintf(this.$t.__("Access Control is only available for licensed %1$s %2$s users.",this.$td),"AIOSEO","Pro")}}},props:{keywords:Object,loading:{type:Boolean,default(){return!1}},showHeader:{type:Boolean,default(){return!0}},showTableFooter:Boolean,showItemsPerPage:Boolean,columns:{type:Array,default(){return["keyword","clicks","ctr","impressions","position","diffPosition","buttons"]}},appendColumns:{type:Object,default(){return{}}},postDetail:{type:Boolean,default(){return!1}},refreshOnLoad:{type:Boolean,default(){return!0}},page:{type:String,default(){return""}}},computed:{...L(["isUnlicensed"]),...x("search-statistics",["data","isConnected"]),changeItemsPerPageSlug(){return this.postDetail?"searchStatisticsPostDetailKeywords":"searchStatisticsKeywordRankings"},allColumns(){var a,u;const e=this.columns,c=((u=(a=this.keywords)==null?void 0:a.filters)==null?void 0:u.find(s=>s.active))||{};return this.appendColumns[c.slug||"all"]&&e.push(this.appendColumns[c.slug||"all"]),e},tableColumns(){return[{slug:"keyword",label:this.$t.__("Keyword",this.$td),sortable:this.isSortable,sortDir:this.orderBy==="keyword"?this.orderDir:"asc",sorted:this.orderBy==="keyword"},{slug:"clicks",label:this.$t.__("Clicks",this.$td),width:"80px",sortable:this.isSortable,sortDir:this.orderBy==="clicks"?this.orderDir:"asc",sorted:this.orderBy==="clicks"},{slug:"ctr",label:this.$t.__("Avg. CTR",this.$td),width:"100px",sortable:this.isSortable,sortDir:this.orderBy==="ctr"?this.orderDir:"asc",sorted:this.orderBy==="ctr"},{slug:"impressions",label:this.$t.__("Impressions",this.$td),width:"120px",sortable:this.isSortable,sortDir:this.orderBy==="impressions"?this.orderDir:"asc",sorted:this.orderBy==="impressions"},{slug:"position",label:this.$t.__("Position",this.$td),width:"85px",sortable:this.isSortable,sortDir:this.orderBy==="position"?this.orderDir:"asc",sorted:this.orderBy==="position"},{slug:"diffDecay",label:this.$t.__("Diff",this.$tdPro),width:"95px"},{slug:"diffPosition",label:this.$t.__("Diff",this.$tdPro),width:"80px"},{slug:"buttons",label:"",width:this.hasSlot("buttons")?"240px":"40px"}].filter(e=>this.allColumns.includes(e.slug))},isSortable(){return this.filter==="all"&&this.$isPro&&!this.isUnlicensed}},methods:{...K("search-statistics",["getPagesByKeywords","updateKeywords","updatePostDetailKeywords"]),decodeHTMLEntities:R,isRowActive(e){return e===this.activeRow},toggleRow(e){if(this.activeRow===e){this.activeRow=-1;return}this.activeRow=e},fetchData(e){return this.isPreloading=!1,this.isFetching=!0,this.page!==""&&(e={...e,page:this.page}),this.postDetail?this.updatePostDetailKeywords(e).finally(()=>{this.isFetching=!1}):this.updateKeywords(e).finally(()=>{this.isFetching=!1})},hasSlot(e="default"){return!!this.$slots[e]},shouldLimitText(e){return 120<R(e).length},maybePreloadPages(){if(!(!this.isConnected||this.isPreloading)){if(this.isFetching&&!this.interval){this.interval=setInterval(()=>{this.isFetching||(clearInterval(this.interval),this.maybePreloadPages())},100);return}this.isPreloading=!0,this.preloadPages().then(()=>{this.isPreloading=!1})}},preloadPages(){var s,l,_,g,f;let e=(l=(s=this.data.keywords)==null?void 0:s.paginated)==null?void 0:l.rows;this.postDetail&&(e=(f=(g=(_=this.data.postDetail)==null?void 0:_.keywords)==null?void 0:g.paginated)==null?void 0:f.rows);const c=[];e.forEach(o=>{o.pages||c.push(o.keyword)});const a=[];for(let o=0;o<c.length;o+=10)a.push(c.slice(o,o+10));const u=[];return a.forEach(o=>{u.push(new Promise(b=>{this.getPagesByKeywords(o).then($=>{Object.entries($).forEach(C=>{const[n,h]=C,w=e.findIndex(B=>B.keyword===n);if(w===-1)return;const D=Object.values(h).slice(0,10);this.postDetail?this.data.postDetail.keywords.paginated.rows[w].pages=D:this.data.keywords.paginated.rows[w].pages=D})}).finally(()=>{b()})}))}),Promise.all(u)}},mounted(){this.maybePreloadPages()},updated(){this.maybePreloadPages()}},me={class:"aioseo-search-statistics-keywords-table"},ye={class:"keyword"},we=["onClick"],ke=["onClick"],be={class:""};function $e(e,c,a,u,s,l){const _=r("core-tooltip"),g=r("statistic"),f=r("svg-caret"),o=r("base-button"),b=r("keyword-inner"),$=r("cta"),C=r("core-wp-table");return d(),k("div",me,[i(C,{ref:"table",class:"keywords-table",id:s.tableId,columns:l.tableColumns,rows:Object.values(a.keywords.rows),totals:a.keywords.totals,filters:a.keywords.filters,"additional-filters":a.keywords.additionalFilters,loading:a.loading,"initial-page-number":e.pageNumber,"initial-search-term":e.searchTerm,"initial-items-per-page":e.$aioseo.settings.tablePagination[l.changeItemsPerPageSlug],"show-header":a.showHeader,"show-bulk-actions":!1,"show-table-footer":a.showTableFooter,"show-items-per-page":a.showItemsPerPage,"show-pagination":"","blur-rows":s.showUpsell,onFilterTable:e.processFilter,onProcessAdditionalFilters:e.processAdditionalFilters,onPaginate:e.processPagination,onProcessChangeItemsPerPage:e.processChangeItemsPerPage,onSearch:e.processSearch,onSortColumn:e.processSort},{keyword:t(({row:n,index:h,editRow:w})=>[m("div",ye,[l.shouldLimitText(n.keyword)?(d(),v(_,{key:0},{tooltip:t(()=>[y(p(l.decodeHTMLEntities(n.keyword)),1)]),default:t(()=>[m("a",{class:"limit-line",href:"#",onClick:S(D=>{w(h),l.toggleRow(h)},["prevent"])},p(l.decodeHTMLEntities(n.keyword)),9,we)]),_:2},1024)):(d(),k("a",{key:1,href:"#",onClick:S(D=>{w(h),l.toggleRow(h)},["prevent"])},p(l.decodeHTMLEntities(n.keyword)),9,ke))])]),clicks:t(({row:n})=>[y(p(n.clicks),1)]),ctr:t(({row:n})=>[y(p(e.$numbers.compactNumber(n.ctr))+"% ",1)]),impressions:t(({row:n})=>[y(p(e.$numbers.compactNumber(n.impressions)),1)]),position:t(({row:n})=>[y(p(Math.round(n.position).toFixed(0)),1)]),diffPosition:t(({row:n})=>[n.difference.comparison?(d(),v(g,{key:0,type:"position",difference:n.difference.position,showCurrent:!1,"tooltip-offset":"-100px,0"},null,8,["difference"])):P("",!0)]),diffDecay:t(({row:n})=>[n.difference.comparison?(d(),v(g,{key:0,type:"decay",difference:n.difference.decay,showCurrent:!1,"tooltip-offset":"-100px,0"},null,8,["difference"])):P("",!0)]),buttons:t(({row:n,index:h,column:w,editRow:D})=>[m("div",be,[I(e.$slots,"buttons",{row:n,column:w,index:h}),i(o,{type:"gray",class:W(["toggle-row-button",{active:l.isRowActive(h)}]),onClick:B=>{D(h),l.toggleRow(h)}},{default:t(()=>[i(f)]),_:2},1032,["class","onClick"])])]),"edit-row":t(({index:n})=>[i(b,{index:n,postDetail:a.postDetail},null,8,["index","postDetail"])]),cta:t(()=>[s.showUpsell?(d(),v($,{key:0,"cta-link":e.$links.getPricingUrl("search-statistics","search-statistics-upsell"),"button-text":s.strings.ctaButtonText,"learn-more-link":e.$links.getUpsellUrl("search-statistics","search-statistics-upsell","home")},{"header-text":t(()=>[y(p(s.strings.ctaHeader),1)]),_:1},8,["cta-link","button-text","learn-more-link"])):P("",!0)]),tablenav:t(()=>[I(e.$slots,"tablenav")]),_:3},8,["id","columns","rows","totals","filters","additional-filters","loading","initial-page-number","initial-search-term","initial-items-per-page","show-header","show-table-footer","show-items-per-page","blur-rows","onFilterTable","onProcessAdditionalFilters","onPaginate","onProcessChangeItemsPerPage","onSearch","onSortColumn"])])}const q=T(ge,[["render",$e]]),Pe={components:{CoreBlur:z,CoreCard:A,GridColumn:F,GridRow:H,KeywordsDistributionGraph:G,KeywordsGraph:M,KeywordsTable:q,SeoStatisticsOverview:U},data(){return{strings:{keywordPositionsCard:this.$t.__("Keyword Positions",this.$td),keywordPositionsTooltip:this.$t.__("This graph is a visual representation of how well <strong>keywords are ranking in search results over time</strong> based on their position and average CTR. This can help you understand the performance of keywords and identify any trends or fluctuations.",this.$td),keywordPerformanceCard:this.$t.__("Keyword Performance",this.$td),keywordPerformanceTooltip:this.$t.__("This table displays the performance of keywords that your site ranks for over time, including metrics such as impressions, click-through rate, and average position in search results. It allows for easy analysis of how keywords are performing and identification of any underperforming keywords that may need to be optimized or replaced.",this.$td)},defaultKeywords:{rows:[],totals:{page:0,pages:0,total:0}}}},computed:{...x("search-statistics",["data"])}},ve={class:"aioseo-search-statistics-dashboard"},Ce=["innerHTML"],Te=["innerHTML"];function De(e,c,a,u,s,l){const _=r("seo-statistics-overview"),g=r("keywords-graph"),f=r("grid-column"),o=r("keywords-distribution-graph"),b=r("grid-row"),$=r("core-card"),C=r("keywords-table"),n=r("core-blur");return d(),v(n,null,{default:t(()=>[m("div",ve,[i(b,null,{default:t(()=>[i(f,null,{default:t(()=>[i($,{slug:"keywordPositions","header-text":s.strings.keywordPositionsCard,toggles:!1,"no-slide":""},{tooltip:t(()=>[m("span",{innerHTML:s.strings.keywordPositionsTooltip},null,8,Ce)]),default:t(()=>[i(_,{statistics:["keywords","impressions","position"],"show-graph":!1,view:"side-by-side"}),i(b,null,{default:t(()=>[i(f,{md:"6"},{default:t(()=>[i(g,{"legend-style":"simple"})]),_:1}),i(f,{md:"6"},{default:t(()=>[i(o)]),_:1})]),_:1})]),_:1},8,["header-text"]),i($,{slug:"keywordPerformance","header-text":s.strings.keywordPerformanceCard,toggles:!1,"no-slide":""},{tooltip:t(()=>[m("span",{innerHTML:s.strings.keywordPerformanceTooltip},null,8,Te)]),default:t(()=>{var h,w;return[i(C,{keywords:((w=(h=e.data)==null?void 0:h.keywords)==null?void 0:w.paginated)||s.defaultKeywords,ref:"table","show-items-per-page":"","show-table-footer":""},null,8,["keywords"])]}),_:1},8,["header-text"])]),_:1})]),_:1})])]),_:1})}const xe=T(Pe,[["render",De]]);const Se={components:{Blur:xe,Cta:j,RequiredPlans:te},data(){return{strings:{ctaButtonText:this.$t.sprintf(this.$t.__("Upgrade to %1$s and Unlock Search Statistics",this.$td),"Pro"),ctaHeader:this.$t.sprintf(this.$t.__("Search Statistics is only for licensed %1$s %2$s users.",this.$td),"AIOSEO","Pro"),ctaDescription:this.$t.__("Connect your site to Google Search Console to receive insights on how content is being discovered. Identify areas for improvement and drive traffic to your website.",this.$td),thisFeatureRequires:this.$t.__("This feature requires one of the following plans:",this.$td),feature1:this.$t.__("Search traffic insights",this.$td),feature2:this.$t.__("Track page rankings",this.$td),feature3:this.$t.__("Track keyword rankings",this.$td),feature4:this.$t.__("Speed tests for individual pages/posts",this.$td)}}},computed:{...L(["isUnlicensed"])}},Ke={class:"aioseo-search-statistics-keyword-rankings"};function Be(e,c,a,u,s,l){const _=r("blur"),g=r("required-plans"),f=r("cta");return d(),k("div",Ke,[i(_),i(f,{"cta-link":e.$links.getPricingUrl("search-statistics","search-statistics-upsell","keyword-rankings"),"button-text":s.strings.ctaButtonText,"learn-more-link":e.$links.getUpsellUrl("search-statistics","keyword-rankings","home"),"feature-list":[s.strings.feature1,s.strings.feature2,s.strings.feature3,s.strings.feature4],"align-top":""},{"header-text":t(()=>[y(p(s.strings.ctaHeader),1)]),description:t(()=>[i(g,{"core-feature":["search-statistics","keyword-rankings"]}),y(" "+p(s.strings.ctaDescription),1)]),_:1},8,["cta-link","button-text","learn-more-link","feature-list"])])}const Ie=T(Se,[["render",Be]]);const Re={components:{CoreCard:A,GridColumn:F,GridRow:H,KeywordsDistributionGraph:G,KeywordsGraph:M,KeywordsTable:q,SeoStatisticsOverview:U},data(){return{strings:{keywordPositionsCard:this.$t.__("Keyword Positions",this.$td),keywordPositionsTooltip:this.$t.__("This graph is a visual representation of how well <strong>keywords are ranking in search results over time</strong> based on their position and average CTR. This can help you understand the performance of keywords and identify any trends or fluctuations.",this.$td),keywordPerformanceCard:this.$t.__("Keyword Performance",this.$td),keywordPerformanceTooltip:this.$t.__("This table displays the performance of keywords that your site ranks for over time, including metrics such as impressions, click-through rate, and average position in search results. It allows for easy analysis of how keywords are performing and identification of any underperforming keywords that may need to be optimized or replaced.",this.$td)},defaultKeywords:{rows:[],totals:{page:0,pages:0,total:0}}}},computed:{...x("search-statistics",["data","loading","isConnected"])},methods:{...K("search-statistics",["loadInitialData"])},mounted(){this.isConnected&&this.loadInitialData()}},Le={class:"aioseo-search-statistics-keywords"},Ae=["innerHTML"],Fe=["innerHTML"];function He(e,c,a,u,s,l){const _=r("seo-statistics-overview"),g=r("keywords-graph"),f=r("grid-column"),o=r("keywords-distribution-graph"),b=r("grid-row"),$=r("core-card"),C=r("keywords-table");return d(),k("div",Le,[i(b,null,{default:t(()=>[i(f,null,{default:t(()=>[i($,{slug:"keywordPositions","header-text":s.strings.keywordPositionsCard,toggles:!1,"no-slide":""},{tooltip:t(()=>[m("span",{innerHTML:s.strings.keywordPositionsTooltip},null,8,Ae)]),default:t(()=>[i(_,{statistics:["keywords","impressions","position"],"show-graph":!1,view:"side-by-side"}),i(b,null,{default:t(()=>[i(f,{md:"6"},{default:t(()=>[i(g,{"legend-style":"simple"})]),_:1}),i(f,{md:"6"},{default:t(()=>[i(o)]),_:1})]),_:1})]),_:1},8,["header-text"]),i($,{slug:"keywordPerformance","header-text":s.strings.keywordPerformanceCard,toggles:!1,"no-slide":""},{tooltip:t(()=>[m("span",{innerHTML:s.strings.keywordPerformanceTooltip},null,8,Fe)]),default:t(()=>{var n,h;return[i(C,{keywords:((h=(n=e.data)==null?void 0:n.keywords)==null?void 0:h.paginated)||s.defaultKeywords,loading:e.loading.keywords,ref:"table",columns:["keyword","clicks","ctr","impressions","position","buttons"],"append-columns":{all:"diffPosition",topLosing:"diffDecay",topWinning:"diffDecay"},"show-items-per-page":"","show-table-footer":""},null,8,["keywords","loading"])]}),_:1},8,["header-text"])]),_:1})]),_:1})])}const Ue=T(Re,[["render",He]]),Me={mixins:[Q],components:{KeywordRankings:Ue,Lite:Ie}},Oe={class:"aioseo-search-statistics-keyword-rankings"};function Ee(e,c,a,u,s,l){const _=r("keyword-rankings",!0),g=r("lite");return d(),k("div",Oe,[e.shouldShowMain("search-statistics","keyword-rankings")?(d(),v(_,{key:0})):P("",!0),e.shouldShowUpgrade("search-statistics","keyword-rankings")||e.shouldShowLite?(d(),v(g,{key:1})):P("",!0)])}const Ne=T(Me,[["render",Ee]]),dt=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:"Module"}));export{q as K,Ne as a,dt as b};
