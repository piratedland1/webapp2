import{a as T,d as L,m as S}from"./vuex.esm-bundler.ccdd8fb3.js";import{C as I}from"./Card.a7500a15.js";import{C as M}from"./GettingStarted.fc3d758b.js";import{C as A}from"./SettingsRow.45faf80a.js";import{c as C,W as B}from"./WpTable.5b32ebd5.js";import"./default-i18n.3a91e0e5.js";import"./constants.355a3bff.js";import{_ as k,r as l,o,c as p,d as _,w as c,f as s,t as a,e as h,h as u,a as d,n as U,g as w,Z as E}from"./_plugin-vue_export-helper.49ea0e68.js";import{D as x}from"./index.3cfc26e3.js";import"./SaveChanges.04870e44.js";import{C as P}from"./Table.edad123c.js";import{C as z}from"./Index.a6f4141a.js";import{S as D}from"./CheckSolid.722e380f.js";import{L as H}from"./License.71d42311.js";import{C as K}from"./index.d59f905b.js";import{u as W}from"./index.9ef60339.js";import{a as V,c as F}from"./helpers.871dba46.js";import{S as R}from"./Rocket.287ab791.js";import"./Tooltip.754dc940.js";import"./Caret.09e548f3.js";import"./Slide.dcb3da9d.js";import"./Row.87dd14fc.js";import"./Book.ab4a20b1.js";import"./RequiresUpdate.fe231e49.js";import"./postContent.53eb7ed3.js";import"./cleanForSlug.13f04843.js";import"./isArrayLikeObject.8c985d83.js";import"./html.68197829.js";import"./Index.20fccad8.js";import"./client.7afeb6b0.js";import"./_commonjsHelpers.f84db168.js";const q={mixins:[C],components:{CoreWpTable:P,Cta:z,SvgCircleCheckSolid:D},data(){return{bulkOptions:[{label:this.$t.__("Activate License",this.$td),value:"activate-license"},{label:this.$t.__("Deactivate License",this.$td),value:"deactivate-license"}],strings:{activate:this.$t.__("Activate",this.$td),deactivate:this.$t.__("Deactivate",this.$td),visitSite:this.$t.__("Visit Site",this.$td),dashboard:this.$t.__("Dashboard",this.$td),ctaHeader:this.$t.sprintf(this.$t.__("This feature is not available in your current plan.",this.$td),"AIOSEO","Pro"),ctaButtonText:this.$t.__("Upgrade Your Plan and Unlock Network Tools",this.$td),networkDatabaseToolsDescription:this.$t.__("Unlock network-level tools to manage all your sites from one easy-to-use location. Manage your license key activations for each individual domain.",this.$td)}}},computed:{columns(){return[{slug:"domain",label:this.$t.__("Domain",this.$td)},{slug:"path",label:this.$t.__("Path",this.$td)},{slug:"primary_domain",label:this.$t.__("Alias Of",this.$td)},{slug:"activated",label:this.$t.__("Activated",this.$td),width:"90px"}]},rows(){return[{blog_id:1,path:"/",domain:"aioseo.com"},{blog_id:2,path:"/",domain:"wpbeginner.com"},{blog_id:3,path:"/",domain:"wpforms.com"},{blog_id:4,path:"/",domain:"optinmonster.com"},{blog_id:5,path:"/",domain:"monsterinsights.com"},{blog_id:8,path:"/",domain:"seedprod.com"},{blog_id:10,path:"/",domain:"easydigitaldownloads.com"}]},totals(){return{total:this.rows.length,pages:1,page:1}},filters(){return[{slug:"all",name:this.$t.__("All",this.$td)},{slug:"activated",name:this.$t.__("Activated",this.$td)},{slug:"deactivated",name:this.$t.__("Deactivated",this.$td)}]}}},G={class:"aioseo-settings-network-sites-activation"},Y={class:"row-actions"},Z={class:"activate",href:"#"},j={class:"view-site",href:"#",target:"_blank"},J={class:"dashboard",href:"#",target:"_blank"};function Q(e,r,g,f,t,n){const m=l("svg-circle-check-solid"),v=l("cta"),$=l("core-wp-table");return o(),p("div",G,[_($,{columns:n.columns,rows:n.rows,totals:n.totals,filters:n.filters,"bulk-options":t.bulkOptions,"blur-rows":"","disable-table":""},{domain:c(({row:y})=>[s("span",null,a(y.domain),1),s("div",Y,[s("span",null,[s("a",Z,[s("span",null,a(t.strings.activate),1)]),h(" | ")]),s("span",null,[s("a",j,[s("span",null,a(t.strings.visitSite),1)]),h(" | ")]),s("span",null,[s("a",J,[s("span",null,a(t.strings.dashboard),1)])])])]),activated:c(()=>[s("span",null,[_(m)])]),cta:c(()=>[_(v,{"cta-link":e.$links.getPricingUrl("network-tools","network-sites-activation"),"button-text":t.strings.ctaButtonText,"learn-more-link":e.$links.getUpsellUrl("network-tools","network-sites-activation","home")},{"header-text":c(()=>[h(a(t.strings.ctaHeader),1)]),description:c(()=>[h(a(t.strings.networkDatabaseToolsDescription),1)]),_:1},8,["cta-link","button-text","learn-more-link"])]),_:1},8,["columns","rows","totals","filters","bulk-options"])])}const X=k(q,[["render",Q]]);const ee={components:{CoreAlert:K,CoreSettingsRow:A},mixins:[H],data(){return{loading:!1,deactivating:!1,error:null,localLicenseKey:null,strings:{purchasedBoldText:this.$t.sprintf("<strong>%1$s %2$s</strong>","All in One SEO","Pro"),licenseKey:this.$t.__("License Key",this.$td),licenseKeyDescription:this.$t.__("Your license key provides access to updates and addons.",this.$td),placeholder:this.$t.__("Paste your license key here",this.$td),connect:this.$t.__("Connect",this.$td),deactivate:this.$t.__("Deactivate this license key",this.$tdPro),aValidLicenseIsRequired:this.$t.__("A valid license key is required in order to enable Pro features and continue to receive automatic updates.",this.$tdPro),purchaseLicense:this.$t.__("Purchase License",this.$td),errors:{licenseKey:{invalid:this.$t.__("The license key provided is invalid. Please use a different key to continue receiving automatic updates.",this.$tdPro),disabled:this.$t.__("The license key provided is disabled. Please use a different key to continue receiving automatic updates.",this.$tdPro),maxReached:this.$t.__("This license key has reached the maximum number of activations. Please deactivate it from another site or purchase a new license to continue receiving automatic updates.",this.$tdPro),apiError:this.$t.__("There was an error connecting to the licensing API. Please try again later.",this.$tdPro),unknown:this.$t.__("An unknown error occurred, please try again later.",this.$tdPro)}},networkPlanIsActive:this.$t.sprintf(this.$t.__("Your license key has been set at the network level of your %1$s. If you would like to use a different license for this subsite, you can enter it below.",this.$td)+" ðŸ™‚","WordPress Multisite")}}},computed:{...T({stateInternalOptions:"internalOptions",stateNetworkOptions:"internalNetworkOptions",options:"options",license:"license"}),...L(["licenseKey"]),internalOptions(){return this.$aioseo.data.isNetworkAdmin?this.stateNetworkOptions:this.stateInternalOptions},enterKey(){return this.$t.sprintf(this.$t.__("Enter your license key below to activate %1$s!",this.$tdPro),this.strings.purchasedBoldText)},planIsActive(){return this.$t.sprintf(this.$t.__("Your %1$s plan is active!",this.$tdPro)+" ðŸ™‚",this.strings.purchasedBoldText)},licenseKeyTypeExpiration(){const e=this.internalOptions.internal.license.expires?x.fromMillis(this.internalOptions.internal.license.expires*1e3).toFormat("MM/dd/yyyy"):null,r=this.internalOptions.internal.license.expires?this.$t.sprintf(this.$t.__("(expires: %1$s)",this.$tdPro),"<strong>"+e+"</strong>"):"",g="<strong>"+W(this.internalOptions.internal.license.level)+"</strong>";return this.$t.sprintf(this.$t.__("Your license level is %1$s %2$s",this.$tdPro),g,r)},licenseKeyExpired(){return this.$t.sprintf(this.$t.__("The license key provided has expired. Please %1$srenew your license%2$s to continue receiving automatic updates.",this.$td),'<a href="'+this.$links.utmUrl("general-settings","license-box-error")+'">',"</a>")}},methods:{...S(["activate","deactivate"]),processActivateLicense(){if(this.error=null,this.loading=!0,/[^\w\s-]/.test(this.licenseKey)){this.error=this.strings.errors.licenseKey.invalid,this.loading=!1;return}this.activate(this.localLicenseKey).then(()=>{this.loading=!1,this.$aioseo.internalOptions.internal.license.expired=!1}).catch(e=>{if(this.localLicenseKey=null,this.loading=!1,!e||!e.response||!e.response.body||!e.response.body.error||!e.response.body.licenseData){this.error=this.strings.errors.licenseKey.unknown;return}const r=e.response.body.licenseData;r.invalid?this.error=this.strings.errors.licenseKey.invalid:r.disabled?this.error=this.strings.errors.licenseKey.disabled:r.expired?this.error=this.licenseKeyExpired:r.activationsError?this.error=this.strings.errors.licenseKey.maxReached:(r.connectionError||r.requestError)&&(this.error=this.strings.errors.licenseKey.apiError)})},processDeactivate(){this.loading=!0,this.deactivating=!0,this.error=null,this.$store.commit("updateInternalOption",{groups:["internal","license"],key:"expired",value:!1}),this.$aioseo.internalOptions.internal.license.expired=!1,this.deactivate().then(()=>this.localLicenseKey=null).then(()=>this.deactivating=!1).then(()=>this.loading=!1)}},mounted(){this.localLicenseKey=this.licenseKey}},te=["innerHTML"],se=["innerHTML"],ie={class:"buttons"},ne={class:"license-key"},oe=s("input",{type:"text",name:"username",autocomplete:"username",style:{display:"none"}},null,-1),ae=["innerHTML"];function re(e,r,g,f,t,n){const m=l("core-alert"),v=l("base-button"),$=l("base-input"),y=l("core-settings-row");return o(),u(y,{name:t.strings.licenseKey},{description:c(()=>[h(a(t.strings.licenseKeyDescription),1)]),content:c(()=>[!e.licenseKey&&(!e.$aioseo.data.isNetworkLicensed||e.$aioseo.data.isNetworkAdmin)?(o(),p("div",{key:0,innerHTML:n.enterKey},null,8,te)):d("",!0),e.license.isActive&&(!e.$aioseo.data.isNetworkLicensed||e.$aioseo.data.isNetworkAdmin)?(o(),p("div",{key:1,innerHTML:n.planIsActive},null,8,se)):d("",!0),!e.licenseKey&&!e.$aioseo.data.isNetworkAdmin&&e.$aioseo.data.isNetworkLicensed?(o(),u(m,{key:2,class:"license-key-alert",type:"green",innerHTML:t.strings.networkPlanIsActive},null,8,["innerHTML"])):d("",!0),e.licenseKey&&!e.license.isActive?(o(),u(m,{key:3,class:"license-key-alert",type:"red"},{default:c(()=>[s("strong",null,a(e.yourLicenseIsText),1),h(" "+a(t.strings.aValidLicenseIsRequired)+" ",1),s("div",ie,[_(v,{type:"green",size:"small",tag:"a",target:"_blank",href:e.$links.getUpsellUrl("feature-manager-upgrade","no-license-key","pricing")},{default:c(()=>[h(a(t.strings.purchaseLicense),1)]),_:1},8,["href"])])]),_:1})):d("",!0),s("form",ne,[oe,_($,{type:"password",class:U({"aioseo-active":e.licenseKey,"aioseo-error":t.error&&!e.licenseKey||e.licenseKey&&!e.license.isActive}),placeholder:t.strings.placeholder,readonly:!!e.licenseKey,disabled:!!e.licenseKey,"append-icon":"circle-check",modelValue:t.localLicenseKey,"onUpdate:modelValue":r[0]||(r[0]=i=>t.localLicenseKey=i),autocomplete:"new-password"},null,8,["class","placeholder","readonly","disabled","modelValue"]),!e.licenseKey||t.deactivating?(o(),u(v,{key:0,type:"green",onClick:w(n.processActivateLicense,["prevent"]),loading:t.loading,disabled:!t.localLicenseKey},{default:c(()=>[h(a(t.strings.connect),1)]),_:1},8,["onClick","loading","disabled"])):d("",!0)]),t.error?(o(),u(m,{key:4,class:"license-key-error",type:"red",innerHTML:t.error},null,8,["innerHTML"])):d("",!0),n.internalOptions.internal.license.level?(o(),p("div",{key:5,innerHTML:n.licenseKeyTypeExpiration,class:"aioseo-description"},null,8,ae)):d("",!0),e.licenseKey&&e.$allowed("aioseo_admin")?(o(),p("a",{key:6,class:"deactivate-license",href:"#",onClick:r[1]||(r[1]=w((...i)=>n.processDeactivate&&n.processDeactivate(...i),["prevent"]))},a(t.strings.deactivate),1)):d("",!0)]),_:1},8,["name"])}const le=k(ee,[["render",re]]),ce={},de={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"aioseo-circle-close-solid"},he=s("path",{d:"M8.4748 17.0008L11.9998 13.4758L15.5248 17.0008L16.9998 15.5258L13.4748 12.0008L16.9998 8.47578L15.5248 7.00078L11.9998 10.5258L8.4748 7.00078L6.9998 8.47578L10.5248 12.0008L6.9998 15.5258L8.4748 17.0008ZM11.9998 22.2008C10.5831 22.2008 9.2538 21.9341 8.0118 21.4008C6.77047 20.8674 5.69147 20.1424 4.7748 19.2258C3.85814 18.3091 3.13314 17.2301 2.5998 15.9888C2.06647 14.7468 1.7998 13.4174 1.7998 12.0008C1.7998 10.5841 2.06647 9.25478 2.5998 8.01278C3.13314 6.77145 3.85814 5.69245 4.7748 4.77578C5.69147 3.85911 6.77047 3.13411 8.0118 2.60078C9.2538 2.06745 10.5831 1.80078 11.9998 1.80078C13.4165 1.80078 14.7458 2.06745 15.9878 2.60078C17.2291 3.13411 18.3081 3.85911 19.2248 4.77578C20.1415 5.69245 20.8665 6.77145 21.3998 8.01278C21.9331 9.25478 22.1998 10.5841 22.1998 12.0008C22.1998 13.4174 21.9331 14.7468 21.3998 15.9888C20.8665 17.2301 20.1415 18.3091 19.2248 19.2258C18.3081 20.1424 17.2291 20.8674 15.9878 21.4008C14.7458 21.9341 13.4165 22.2008 11.9998 22.2008Z",fill:"currentColor"},null,-1),ue=[he];function pe(e,r){return o(),p("svg",de,ue)}const _e=k(ce,[["render",pe]]);const me={mixins:[C,B],components:{CoreAlert:K,CoreWpTable:P,SvgCircleCheckSolid:D,SvgCircleCloseSolid:_e},data(){return{tableId:"network-site-activations-wp-table",changeItemsPerPageSlug:"networkDomains",bulkOptions:[{label:this.$t.__("Activate License",this.$td),value:"activate-license"},{label:this.$t.__("Deactivate License",this.$td),value:"deactivate-license"}],strings:{selectSites:this.$t.__("By default, your license key is activated on the primary domain for this network. To activate the license key on additional sites, select them below.",this.$td),activate:this.$t.__("Activate",this.$td),deactivate:this.$t.__("Deactivate",this.$td),visitSite:this.$t.__("Visit Site",this.$td),dashboard:this.$t.__("Dashboard",this.$td)}}},computed:{...T(["networkData"]),columns(){return[{slug:"domain",label:this.$t.__("Domain",this.$td),sortable:!0,sortDir:this.orderBy==="domain"?this.orderDir:"asc",sorted:this.orderBy==="domain"},{slug:"path",label:this.$t.__("Path",this.$td),sortable:!0,sortDir:this.orderBy==="path"?this.orderDir:"asc",sorted:this.orderBy==="path"},{slug:"primary_domain",label:this.$t.__("Alias Of",this.$td)},{slug:"activated",label:this.$t.__("Activated",this.$td),width:"95px"}]},rows(){return this.getSites.map(e=>(this.isMainSite(e.domain,e.path)&&(e.preventBulkAction=!0),e.rowIndex="uniqueId",e.uniqueId=this.getUniqueSiteId(e),e))},totals(){return{total:this.networkData.sites.total,pages:Math.ceil(this.networkData.sites.total/this.networkData.sites.limit)||1,page:this.pageNumber}},filters(){return[{slug:"all",name:this.$t.__("All",this.$td),active:this.filter==="all"},{slug:"activated",name:this.$t.__("Activated",this.$td),active:this.filter==="activated"},{slug:"deactivated",name:this.$t.__("Deactivated",this.$td),active:this.filter==="deactivated"}]}},methods:{...S({multisite:"multisite",fetchData:"fetchNetworkSites"}),activateDomain(e){this.wpTableLoading=!0,this.multisite({activate:[e]}).then(()=>{this.wpTableLoading=!1})},deactivateDomain(e){this.wpTableLoading=!0,this.multisite({deactivate:[e]}).then(()=>{this.wpTableLoading=!1})},maybeDoBulkAction({action:e,selectedRows:r}){this.wpTableLoading=!0;const g=e==="activate-license"?V(r,this.activeSitesIds):[],f=e==="deactivate-license"?F(r,this.activeSitesIds):[];if(!g.length&&!f.length){this.wpTableLoading=!1;return}this.multisite({activate:this.parseSiteValue(g),deactivate:this.parseSiteValue(f)}).then(()=>{this.wpTableLoading=!1})}}},ge={class:"aioseo-settings-network-sites-activation"},ve={class:"row-actions"},$e={key:0},ye=["onClick"],fe={key:1},ke=["onClick"],be=["href"],we=["href"],Te={key:0};function Le(e,r,g,f,t,n){const m=l("core-alert"),v=l("svg-circle-check-solid"),$=l("svg-circle-close-solid"),y=l("core-wp-table");return o(),p("div",ge,[_(m,{type:"blue"},{default:c(()=>[h(a(t.strings.selectSites),1)]),_:1}),_(y,{id:t.tableId,"bulk-options":t.bulkOptions,columns:n.columns,filters:n.filters,"initial-items-per-page":e.$aioseo.settings.tablePagination.networkDomains,"initial-page-number":e.pageNumber,loading:e.wpTableLoading,rows:n.rows,totals:n.totals,"show-items-per-page":"",onFilterTable:e.processFilterTable,onPaginate:e.processPagination,onProcessBulkAction:n.maybeDoBulkAction,onProcessChangeItemsPerPage:e.processChangeItemsPerPage,onSearch:e.processSearch,onSortColumn:e.processSort},{domain:c(({row:i})=>[s("span",null,a(i.domain),1),s("div",ve,[!e.isSiteActive(i)&&!e.isMainSite(i.domain,i.path)?(o(),p("span",$e,[s("a",{class:"activate",href:"#",onClick:w(b=>n.activateDomain(i),["stop","prevent"]),target:"_blank"},[s("span",null,a(t.strings.activate),1)],8,ye),h(" | ")])):d("",!0),e.isSiteActive(i)&&!e.isMainSite(i.domain,i.path)?(o(),p("span",fe,[s("a",{class:"deactivate",href:"#",onClick:w(b=>n.deactivateDomain(i),["stop","prevent"]),target:"_blank"},[s("span",null,a(t.strings.deactivate),1)],8,ke),h(" | ")])):d("",!0),s("span",null,[s("a",{class:"view-site",href:i.homeUrl,target:"_blank"},[s("span",null,a(t.strings.visitSite),1)],8,be),h(" | ")]),s("span",null,[s("a",{class:"dashboard",href:i.adminUrl,target:"_blank"},[s("span",null,a(t.strings.dashboard),1)],8,we)])])]),activated:c(({row:i})=>[s("span",null,[e.isSiteActive(i)?(o(),u(v,{key:0})):d("",!0),e.isSiteActive(i)?d("",!0):(o(),u($,{key:1}))])]),primary_domain:c(({row:i})=>[i.parentDomain?(o(),p("span",Te,a(i.parentDomain+i.parentPath),1)):d("",!0)]),_:1},8,["id","bulk-options","columns","filters","initial-items-per-page","initial-page-number","loading","rows","totals","onFilterTable","onPaginate","onProcessBulkAction","onProcessChangeItemsPerPage","onSearch","onSortColumn"])])}const Se=k(me,[["render",Le]]);const Ae={components:{CoreCard:I,CoreGettingStarted:M,CoreSettingsRow:A,LiteSettingsNetworkSitesActivation:X,SettingsLicenseKey:le,SettingsNetworkSitesActivation:Se,SvgRocket:R},data(){return{strings:{license:this.$t.__("License",this.$td),boldText:this.$t.sprintf("<strong>%1$s %2$s</strong>","All in One SEO",this.$t.__("Free",this.$td)),purchasedBoldText:this.$t.sprintf("<strong>%1$s %2$s</strong>","All in One SEO","Pro"),linkText:this.$t.sprintf(this.$t.__("upgrading to %1$s",this.$td),"Pro"),moreBoldText:this.$t.sprintf("<strong>%1$s</strong>",this.$constants.DISCOUNT_PERCENTAGE+" "+this.$t.__("off",this.$td)),setupWizard:this.$t.__("Setup Wizard",this.$td),relaunchSetupWizard:this.$t.__("Relaunch Setup Wizard",this.$td),setupWizardText:this.$t.sprintf(this.$t.__("Use our configuration wizard to properly set up %1$s with your WordPress website.",this.$td),"All in One SEO"),domainActivations:this.$t.__("Domain Activations",this.$td)}}},computed:{...L(["settings","isUnlicensed"]),link(){return this.$t.sprintf('<strong><a href="%1$s" target="_blank">%2$s</a></strong>',this.$links.utmUrl("general-settings","license-box-tooltip"),this.strings.linkText)},tooltipText(){return this.$t.sprintf(this.$t.__("To unlock more features, consider %1$s.",this.$td),this.link)},moreToolTipText(){return this.$t.sprintf(this.$t.__("As a valued user you receive %1$s, automatically applied at checkout!",this.$td),this.strings.moreBoldText)}}},Ce={class:"aioseo-general-settings"},Pe=["innerHTML"],De=s("br",null,null,-1),Ke=["innerHTML"],Oe={class:"aioseo-description"};function Ne(e,r,g,f,t,n){const m=l("core-getting-started"),v=l("settings-license-key"),$=l("svg-rocket"),y=l("base-button"),i=l("core-settings-row"),b=l("core-card"),O=l("settings-network-sites-activation"),N=l("lite-settings-network-sites-activation");return o(),p("div",Ce,[e.settings.showSetupWizard&&e.$allowed("aioseo_setup_wizard")&&!e.$aioseo.data.isNetworkAdmin?(o(),u(m,{key:0})):d("",!0),_(b,{slug:"license","header-text":t.strings.license},E({default:c(()=>[_(v),!e.settings.showSetupWizard&&e.$allowed("aioseo_setup_wizard")&&!e.$aioseo.data.isNetworkAdmin?(o(),u(i,{key:0,name:t.strings.setupWizard},{content:c(()=>[_(y,{type:"blue",size:"medium",tag:"a",href:e.$aioseo.urls.aio.wizard},{default:c(()=>[_($),h(" "+a(t.strings.relaunchSetupWizard),1)]),_:1},8,["href"]),s("p",Oe,a(t.strings.setupWizardText),1)]),_:1},8,["name"])):d("",!0)]),_:2},[e.$isPro?void 0:{name:"tooltip",fn:c(()=>[s("div",{innerHTML:n.tooltipText},null,8,Pe),De,s("div",{class:"more-tooltip-text",innerHTML:n.moreToolTipText},null,8,Ke)]),key:"0"}]),1032,["header-text"]),e.$aioseo.data.isNetworkAdmin?(o(),u(b,{key:1,slug:"domainActivations","header-text":t.strings.domainActivations},{default:c(()=>[!e.isUnlicensed&&e.$license.hasCoreFeature(e.$aioseo,"tools","network-tools-site-activation")?(o(),u(O,{key:0})):d("",!0),e.isUnlicensed||!e.$license.hasCoreFeature(e.$aioseo,"tools","network-tools-site-activation")?(o(),u(N,{key:1})):d("",!0)]),_:1},8,["header-text"])):d("",!0)])}const ht=k(Ae,[["render",Ne]]);export{ht as default};
